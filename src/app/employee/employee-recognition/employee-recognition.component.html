<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow-lg border-0 border-top border-primary border-4 rounded-4 position-relative">

        <div class="text-center py-4 rounded-top-4 bg-white">
          <div class="icon-circle bg-primary-subtle mx-auto mb-2">
            <i class="bi bi-stars text-primary fs-2"></i>
          </div>
          <h3 class="fw-bold mb-0">Give Recognition</h3>
          <p class="text-muted small">Spread positivity across the team!</p>
        </div>

        <div class="card-body p-4 pt-0">
          <form [formGroup]="recognitionForm" (ngSubmit)="onSubmit()">

            <div class="row g-2 mb-3">
              <div class="col-8 position-relative">
                <label class="form-label fw-semibold small">Search Employee</label>
                <div class="input-group">
                  <span class="input-group-text bg-light border-0"><i class="bi bi-search"></i></span>
                  <input type="text" class="form-control bg-light border-0 shadow-none" placeholder="Type name..."
                    formControlName="employeeSearch" (input)="onSearchChange($event)">
                </div>

                @if (filteredEmployees().length > 0) {
                <ul class="list-group position-absolute w-100 z-3 shadow-lg mt-1">

                  @for (emp of filteredEmployees(); track emp.id) {
                  <li class="list-group-item list-group-item-action border-0 py-2" (click)="selectEmployee(emp)">
                    <div class="d-flex align-items-center">
                      <div class="avatar-xs me-2">{{ emp.name.charAt(0) }}</div>
                      <div>
                        <div class="fw-bold small">{{ emp.name }}</div>
                        <div class="text-muted extra-small">ID: {{ emp.id }}</div>
                      </div>
                    </div>
                  </li>
                  }

                </ul>
                }
              </div>

              <div class="col-4">
                <label class="form-label fw-semibold small">ID</label>
                <input type="text" class="form-control bg-light border-0 text-center fw-bold text-primary shadow-none"
                  formControlName="employeeId" readonly>
              </div>
            </div>

            <hr class="my-3 opacity-25">

            <div class="mb-3">
              <label class="form-label fw-semibold small">Award Badge</label>
              <div class="row g-2">
                <div class="col-12">
                  <select class="form-select border-2" formControlName="badgeType" [ngClass]="getBadgeTheme()">
                    <option value="" disabled>Choose a badge...</option>
                    <option value="Team Player">ü§ù Team Player</option>
                    <option value="Problem Solver">üí° Problem Solver</option>
                    <option value="Leader">üöÄ Leader</option>
                    <option value="Innovator">‚ú® Innovator</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="mb-3 bg-light p-3 rounded-3">
              <div class="d-flex justify-content-between align-items-center mb-1">
                <label class="form-label fw-semibold small mb-0">Impact Score</label>
                <span class="badge bg-primary rounded-pill">{{ recognitionForm.get('points')?.value }} Points</span>
              </div>
              <input type="range" class="form-range" min="1" max="10" step="1" formControlName="points">
              <div class="d-flex justify-content-between x-small text-muted">
                <span>Good</span>
                <span>Exceptional</span>
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label fw-semibold small">Appreciation Note</label>
              <textarea class="form-control border-2" rows="3" placeholder="What made their work stand out?"
                formControlName="comment"></textarea>
            </div>

            <div class="d-grid">
              <button type="submit" [disabled]="recognitionForm.invalid || !selectedEmp()"
                class="btn btn-primary btn-lg rounded-pill shadow py-3 fw-bold">
                <i class="bi bi-send-fill me-2"></i>Confirm & Send
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>